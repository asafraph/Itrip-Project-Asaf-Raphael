(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{120:function(e,t,a){e.exports=a.p+"static/media/logo.13d0397b.png"},139:function(e,t,a){e.exports=a(247)},144:function(e,t,a){},247:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),l=(a(144),a(290)),s=a(289),i=a(249),u=a(285),m=a(25),p=a(14),f=a(11),d=a.n(f),g=a(20),h=a(18),v=a(292),b=a(295),E=a(68),y=a(17),O=function(e){var t=e.history,a=Object(y.b)(),o=Object(y.c)((function(e){return e.user})),c=Object(n.useState)(""),l=Object(h.a)(c,2),s=l[0],i=l[1],p=Object(n.useState)(""),f=Object(h.a)(p,2),O=f[0],j=f[1],N=Object(n.useState)(""),w=Object(h.a)(N,2),C=w[0],k=w[1],x=r.a.useState(!1),S=Object(h.a)(x,2),T=S[0],A=S[1];Object(n.useEffect)((function(){o.Fname&&t.push("/main")}),[o,t]);var I=function(){var e=Object(g.a)(d.a.mark((function e(n){var r,o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:O})});case 2:return r=e.sent,e.next=5,r.json();case 5:(o=e.sent).error?(k(o.msg),A(!0)):(c=Object(E.a)(o.token),localStorage.token=o.token,setTimeout((function(){return a({type:"LOGOUT"})}),6e5),setTimeout((function(){return localStorage.removeItem("token")}),6e5),a({type:"LOGIN",payload:c}),t.push("/main")),console.log(o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-cont"},r.a.createElement("form",{className:"login-form"},r.a.createElement(v.a,{margin:"normal",className:"login-inp",variant:"outlined",label:"User name",onChange:function(e){return i(e.target.value)}}),r.a.createElement(v.a,{margin:"normal",className:"login-inp",variant:"outlined",label:"Password",type:"password",onChange:function(e){return j(e.target.value)}}),r.a.createElement(u.a,{onClick:I,variant:"contained",color:"primary"},"LOGIN"),r.a.createElement("span",{className:"span"},"dont have an account yet?",r.a.createElement(m.b,{to:"/register"}," sign in"))),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:T,onClose:function(e,t){A(!1)},message:C}))},j=function(e){var t=e.history,a=Object(y.c)((function(e){return e.user})),o=Object(n.useState)(""),c=Object(h.a)(o,2),l=c[0],s=c[1],i=Object(n.useState)(""),p=Object(h.a)(i,2),f=p[0],E=p[1],O=Object(n.useState)(""),j=Object(h.a)(O,2),N=j[0],w=j[1],C=Object(n.useState)(""),k=Object(h.a)(C,2),x=k[0],S=k[1],T=Object(n.useState)(""),A=Object(h.a)(T,2),I=A[0],D=A[1],U=Object(n.useState)(!1),F=Object(h.a)(U,2),L=F[0],P=F[1];Object(n.useEffect)((function(){a.name&&t.push("/main")}),[a,t]);var V=function(){var e=Object(g.a)(d.a.mark((function e(a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Fname:l,Lname:f,username:N,password:x})});case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).error?(D(r.msg),P(!0)):t.push("/main");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"register-cont"},r.a.createElement("form",{className:"register-form"},r.a.createElement(v.a,{margin:"normal",className:"register-inp",variant:"outlined",label:"first name",onChange:function(e){return s(e.target.value)}}),r.a.createElement(v.a,{margin:"normal",className:"register-inp",variant:"outlined",label:"last name",onChange:function(e){return E(e.target.value)}}),r.a.createElement(v.a,{margin:"normal",className:"register-inp",variant:"outlined",label:"Username",onChange:function(e){return w(e.target.value)}}),r.a.createElement(v.a,{margin:"normal",className:"register-inp",variant:"outlined",label:"Password",type:"password",onChange:function(e){return S(e.target.value)}}),r.a.createElement(u.a,{onClick:V,variant:"contained",color:"primary"},"SIGN IN"),r.a.createElement("span",{className:"span"},"already have an account?",r.a.createElement(m.b,{to:"/login"}," login"))),r.a.createElement(b.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:L,onClose:function(e,t){P(!1)},message:I}))},N=a(122),w=a(115),C=a.n(w),k=a(116),x=a.n(k),S=a(286),T=a(294),A=a(118),I=a.n(A),D=a(117),U=a.n(D),F=function(e){var t=e.history,a=Object(n.useState)([]),o=Object(h.a)(a,2),c=o[0],l=o[1],s=Object(y.b)(),i=Object(y.c)((function(e){return e.user}));console.log(i),Object(n.useEffect)((function(){i.Fname||t.push("/login")}),[i,t]),Object(n.useEffect)((function(){Object(g.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.id,e.next=3,fetch("http://localhost:1000/follow/"+t);case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,console.log(n),l(n.result);case 9:case"end":return e.stop()}}),e)})))()}),[i.id]);var u=function(){var e=Object(g.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.id,e.next=3,fetch("http://localhost:1000/follow/"+t);case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,console.log(n),l(n.result);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(e){var t=e.target.parentElement.parentElement.parentElement.id;console.log(t);var a=c.find((function(e){return e.id===t}));s({type:"UPDATE_VACATION",payload:a})},f=function(e){var t=e.target.parentElement.parentElement.parentElement.id,a=c.find((function(e){return e.id===t}));s({type:"REMOVE_VACATION",payload:a})},v=function(){var e=Object(g.a)(d.a.mark((function e(t){var a,n,r,o,l,s,m,p,f,g;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.parentElement.parentElement.parentElement.parentElement.id,n=c.find((function(e){return e.id===a})),r=i.id,!t.target.checked){e.next=13;break}return e.next=6,fetch("http://localhost:1000/follow",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r,vacationId:a})});case 6:return o=e.sent,e.next=9,o.json();case 9:(l=e.sent).error?console.log(l.error):(s=n.followUsers+1,b(a,s),u()),e.next=24;break;case 13:return e.next=15,E(r,a);case 15:return m=e.sent,console.log(m),e.next=19,fetch("http://localhost:1000/follow/remove/".concat(m),{method:"PUT",headers:{"Content-Type":"application/json"}});case 19:return p=e.sent,e.next=22,p.json();case 22:(f=e.sent).error?console.log(f.error):(g=n.followUsers-1,b(a,g),u());case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(g.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/follow/update/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({followUsers:a})});case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).error&&console.log(r.error),u();case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),E=function(){var e=Object(g.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/follow/getid",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,vacationId:a})});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,console.log(r),e.abrupt("return",r.result[0].id);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"vacations-cont"},c.map((function(e){return r.a.createElement(N.a,{key:e.id,className:"vacation-paper",id:e.id,elevation:3},"admin"===i.category?r.a.createElement("div",{className:"btns-cont",id:e.id},r.a.createElement(m.c,{to:"/update",onClick:p},r.a.createElement(C.a,null)),r.a.createElement(m.c,{to:"/remove",onClick:f},r.a.createElement(x.a,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{control:r.a.createElement(T.a,{icon:r.a.createElement(U.a,null),checkedIcon:r.a.createElement(I.a,null),name:"checkedH"}),label:"FOLLOW",onChange:v,checked:null!=e.user_id})),r.a.createElement("h4",{className:"prop"},e.city),r.a.createElement("h3",{className:"prop"},e.country),r.a.createElement("img",{className:"vacation-image",src:e.image,alt:""}),r.a.createElement("h3",{className:"prop"},"followers: ",e.followUsers),r.a.createElement("p",{className:"prop"},e.departureDate.slice(0,10).replace(/-/g,"/")," - ",e.returnDate.slice(0,10).replace(/-/g,"/")),r.a.createElement("h2",{className:"prop"},e.price,"$"),r.a.createElement("p",{className:"prop desc"},e.description))}))))},L=a(288),P=a(89),V=a(21),G=a(291),J=function(e){var t=e.history,a=Object(y.c)((function(e){return e.user})),o=Object(y.c)((function(e){return e.vacation})),c=Object(n.useState)(o.departureDate),l=Object(h.a)(c,2),s=l[0],i=l[1],m=Object(n.useState)(o.returnDate),p=Object(h.a)(m,2),f=p[0],b=p[1];Object(n.useEffect)((function(){a.Fname||t.push("/login")}),[a,t]);var E=o,O=function(){var e=Object(g.a)(d.a.mark((function e(a){var n,r,c,l,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=JSON.stringify({city:E.city,country:E.country,description:E.description,image:E.image,departureDate:s,returnDate:f,price:E.price}),!o.id){e.next=12;break}return console.log(E),e.next=5,fetch("http://localhost:1000/vacations/update/"+o.id,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:localStorage.token},body:n});case 5:return r=e.sent,e.next=8,r.json();case 8:(c=e.sent).error||t.push("/main"),console.log(c),e.next=19;break;case 12:return e.next=14,fetch("http://localhost:1000/vacations/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.token},body:n});case 14:return l=e.sent,e.next=17,l.json();case 17:(i=e.sent).error||t.push("/main"),console.log(i);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"vacConfig"},r.a.createElement("form",{className:"vacconfig-form"},r.a.createElement(v.a,{margin:"normal",className:"vacConfig-inp",label:"city",defaultValue:o.city,variant:"outlined",onChange:function(e){return E.city=e.target.value}}),r.a.createElement(v.a,{margin:"normal",className:"vacConfig-inp",label:"country",defaultValue:o.country,variant:"outlined",onChange:function(e){return E.country=e.target.value}}),r.a.createElement(v.a,{margin:"normal",className:"vacConfig-inp",label:"price",defaultValue:o.price,variant:"outlined",onChange:function(e){return E.price=e.target.value}}),r.a.createElement(v.a,{margin:"normal",className:"vacConfig-inp",multiline:!0,rows:3,label:"description",defaultValue:o.description,variant:"outlined",onChange:function(e){return E.description=e.target.value}}),r.a.createElement(v.a,{margin:"normal",className:"vacConfig-inp",fullWidth:!0,label:"image",defaultValue:o.image,variant:"outlined",onChange:function(e){return E.image=e.target.value}}),r.a.createElement(V.a,{utils:P.a},r.a.createElement(L.a,{container:!0,justify:"space-around"},r.a.createElement(G.a,{className:"vacConfig-inp",disableToolbar:!0,format:"dd/MM/yyyy",margin:"normal",id:"date-picker-inline",label:"Departure Date",value:s,onChange:function(e){console.log(e),i(e)},KeyboardButtonProps:{"aria-label":"change date"}}))),r.a.createElement(V.a,{utils:P.a},r.a.createElement(L.a,{container:!0,justify:"space-around"},r.a.createElement(G.a,{className:"vacConfig-inp",disableToolbar:!0,format:"dd/MM/yyyy",margin:"normal",id:"date-picker-inline",label:"Return Date",value:f,onChange:function(e){console.log(e),b(e)},KeyboardButtonProps:{"aria-label":"change date"}}))),r.a.createElement("div",{className:"btn-cont"},r.a.createElement(u.a,{onClick:O,variant:"contained",color:"secondary",className:"vacconfig-btn"},o.id?"update vacation":"add vacation"),r.a.createElement(u.a,{variant:"contained",color:"primary",className:"vacconfig-btn",onClick:function(){t.push("/main")}},"cancle"))))},B=function(e){var t=e.history,a=Object(y.c)((function(e){return e.vacation}));console.log(a);var n=function(){var e=Object(g.a)(d.a.mark((function e(n){var r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/vacations/remove/"+a.id,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.token}});case 2:return r=e.sent,e.next=5,r.json();case 5:(o=e.sent).error||t.push("/main"),console.log(o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"removevac"},r.a.createElement("form",{className:"removevac-form"},r.a.createElement("h1",null,"are you sure you want to remove the vacation in ",a.country,"?"),r.a.createElement("h2",null,"it has ",a.followUsers," followers!"),r.a.createElement(u.a,{onClick:n,variant:"contained",color:"secondary",className:"vacconfig-btn"},"remove"),r.a.createElement(u.a,{variant:"contained",color:"primary",className:"vacconfig-btn",onClick:function(){t.push("/main")}},"cancle")))},_=a(119),M=function(e){var t,a=e.history,o=Object(n.useState)([]),c=Object(h.a)(o,2),l=c[0],s=c[1],i=Object(y.c)((function(e){return e.user})),m=[],p=[];Object(n.useEffect)((function(){i.Fname||a.push("/login")}),[i,a]),Object(n.useEffect)((function(){Object(g.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:1000/vacations");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log(a),s(a);case 8:case"end":return e.stop()}}),e)})))()}),[]);return console.log(l),console.log(i),l.length>0&&l.forEach((function(e){e.followUsers>0&&(m.push(e.city),p.push(e.followUsers))})),console.log(m),console.log(p),m.length>0&&(t={labels:m,datasets:[{label:"followers",data:p,backgroundColor:"rgba(54, 162, 235, 0.6)",yAxisID:0}]}),console.log(t),r.a.createElement("div",{className:"reports"},r.a.createElement("div",{className:"rep-form"},r.a.createElement(_.Bar,{className:"chart-Bar",data:t,options:{maintainAspectRatio:!1,scales:{yAxes:[{stacked:!0}]}}})),r.a.createElement("div",{className:"btn-cont"},r.a.createElement(u.a,{variant:"contained",color:"primary",className:"vacconfig-btn",onClick:function(){a.push("/main")}},"back")))},z=a(120),R=a.n(z),H=function(){var e=Object(y.b)(),t=Object(y.c)((function(e){return e.user}));Object(n.useEffect)((function(){if(localStorage.token){var t=Object(E.a)(localStorage.token);console.log(t),e({type:"LOGIN",payload:t})}}),[e]);var a=function(){localStorage.removeItem("token"),e({type:"LOGOUT"})},o=function(){e({type:"ADD_VACATION",payload:{}})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement(l.a,{className:"appBar",position:"fixed"},r.a.createElement(s.a,{className:"toolBar"},r.a.createElement("div",null,r.a.createElement("img",{src:R.a,alt:"",className:"logo",width:"120"})),t.Fname?r.a.createElement(r.a.Fragment,null,"admin"===t.category?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(m.b,{to:"/add"},r.a.createElement(u.a,{className:"nav-btn brand",style:{width:"5%"},onClick:o},"add")),r.a.createElement(m.b,{to:"/reports"},r.a.createElement(u.a,{className:"nav-btn",width:10,style:{width:"5%"},onClick:o},"reports")),r.a.createElement(u.a,{className:"nav-btn",style:{width:"5%"},width:10,onClick:a},"Logout"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{className:"nav-btn",style:{width:"5%"},onClick:a},"Logout")),r.a.createElement(i.a,{variant:"h6",className:"brand"},"Hello ",t.Fname)):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(m.b,{to:"/login"},r.a.createElement(u.a,{className:"nav-btn"},"Login")),r.a.createElement(m.b,{to:"/register"},r.a.createElement(u.a,{className:"nav-btn",margin:"normal"},"Register")))))),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/login",component:O}),r.a.createElement(p.b,{path:"/register",component:j}),r.a.createElement(p.b,{path:"/main",component:F}),r.a.createElement(p.b,{path:"/add",component:J}),r.a.createElement(p.b,{path:"/update",component:J}),r.a.createElement(p.b,{path:"/remove",component:B}),r.a.createElement(p.b,{path:"/reports",component:M}),r.a.createElement(p.a,{from:"/",to:"/login"}))))},K=a(55),W=Object(K.c)(Object(K.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.payload;case"LOGOUT":return{};default:return e}},vacation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_VACATION":return{};case"UPDATE_VACATION":case"REMOVE_VACATION":return t.payload;default:return e}}}));c.a.render(r.a.createElement(y.a,{store:W},r.a.createElement(H,null)),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.82931748.chunk.js.map